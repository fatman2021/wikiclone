<languages />


{{Metadata|abstract=Этот документ описывает установку и поддержку принтеров, использующих CUPS и Samba. Он охватывает локальную и сетевую установки. Вы также найдете инструкции по использованию общих принтеров из других операционных систем.}}

Этот документ описывает установку и поддержку принтеров, использующих CUPS и Samba. Он охватывает локальную и сетевую установки. Вы также найдете инструкции по использованию общих принтеров из других операционных систем.

== Печать в Gentoo Linux ==

=== Используйте правильные инструменты ===

Linux имеет отличную поддержку принтеров; правильным инструментом для работы является CUPS ( [http://www.cups.org Common Unix Printing System] ). С самого начала проекта, в 1999, установка и поддержка CUPS существенно улучшилась. 

В этом документе мы опишем как использовать CUPS для настройки локального или сетевого принтера. Мы не будем углубляться в подробности, так как проект имеет [http://www.cups.org/documentation.php отличную документацию], доступную для расширенного использования. 

== Сконфигурируйте ядро ==

=== Введение ===

Когда вы хотите установить принтер на систему, вам требуется знать как принтер будет к ней подсоединен. Будет ли подключение осуществляться через локальный порт, например LPT или USB, или он будет подключен по сети? И если это так, будет ли использован протокол межсетевой печати (Internet Printing Protocol (IPP)) или протокол Microsoft Windows CIFS (Microsoft Windows Sharing)? 

Следующие несколько разделов объясняют какая минимальная конфигурация ядра вам нужна. Конечно же, это зависит от того, как ваш принтер будет подключен к системе, поэтому для вашего удобства мы разделили инструкции.

Итак, перейдите к {{Path|/usr/src/linux}} и запустите <code>make menuconfig</code>, чтобы войти в меню конфигурации ядра. Если вы использовали <code>genkernel</code> для конфигурации ядра, вы все же должны выполнить эти шаги, чтобы убедиться, что ничего не пропущено. Вы не можете полагаться только на <code>genkernel</code>, чтобы настроить все на вашей системе; печать - эта та область, где сложно автоматически определить верные настройки, если их вообще можно определить.

В следующих примерах конфигурации мы добавим необходимую поддержку ''в'' ядро, а не в качестве модулей. Такая сборка ядра необязательна; если вы хотите, вы можете с легкостью использовать поддержку модулей, но удостоверьтесь, что впоследствии вы не забыли загрузить необходимые модули. 

Теперь перейдите к соответствующему разделу для конфигурации (или проверки) вашего ядра.

=== Локально подключенный принтер (LPT) ===

LPT порт обычно используется для идентификации параллельного порта принтера. Вам потребуется сначала включить поддержку параллельного порта, затем поддержку параллельного порта "PC-style" (если только вы не пользователь SPARC), после чего включить поддержку принтера с параллельным интерфейсом. 

{{KernelBox|title=Parallel Port Printer Configuration|<pre>
Device Drivers -->
  <*> Parallel port support
  <*> PC-style hardware
  [*] IEEE 1284 transfer modes
  Character Devices -->
    <*> Parallel printer support
</pre>
}}

{{Note/ru|Некоторым пользователям может потребоваться включение других параметров в разделе конфигурации <code>Parallel port support</code>. Проверьте функцию конфигурации ядра <code>Help</code> для получения подробностей.}}

Дело сделано; выйдите из конфигурации ядра и соберите ядро заново:

{{RootCmd|make && make modules_install}}

Не забудьте скопировать новый образ ядра в {{Path|/boot}} (и не забудьте смонтировать {{Path|/boot}} при необходимости) и обновите конфигурацию загрузчика перед перезагрузкой системы. Например, при использовании Grub2, это можно сделать, выполнив следующие команды:

{{RootCmd|make install}}
{{RootCmd|grub2-mkconfig -o /boot/grub.grub.cfg}}

Теперь переходите к CUPS.

=== Локально подключенный принтер (USB) ===

Чтобы включить печать через USB, вам требуется поддержка USB ядром: 

{{Kernel|Конфигурация принтера с USB портом|<pre>
Device Drivers -->
  USB Support -->
    <*> Support for Host-side USB
    (...)
    --- USB Host Controller Drivers
    (Select the HCD that your system uses. If you do not know which one
     to select, run "lspci -v | grep HCI" from another terminal)
    <*> EHCI HCD (USB 2.0) support ( or )
    <*> OHCI HCD support           ( or )
    <*> UHCI HCD (most Intel and VIA) support
</pre>
}}

Дело сделано; выйдите из конфигурации ядра и соберите ядро заново. Не забудьте скопировать новый образ ядра в {{Path|/boot}} (и не забудьте смонтировать {{Path|/boot}} при необходимости) и обновите конфигурацию загрузчика перед перезагрузкой системы. Посмотрите на команды в вышеприведенном шаге '''Локально подключенный принтер (LPT)''', если вы не уверены, что нужно делать на этих двух шагах.

Теперь продолжайте с CUPS.

=== Удаленно подключенный принтер (IPP) ===

Чтобы иметь возможность подсоединиться к удаленно подключенному принтеру через протокол межсетевой печати (IPP), ядро должно иметь поддержку сети. Предполагая, что ядро уже имеет эту поддержку, переходите к CUPS. 

=== Удаленно подключенный принтер (CIFS) ===

Ядро должно поддерживать CIFS: 

{{Kernel|Конфигурация принтера CIFS|<pre>
File systems -->
  Network File Systems -->
    <*> CIFS support (advanced network filesystem, SMBFS successor) 
</pre>
}}

Дело сделано; выйдите из конфигурации ядра и соберите ядро заново. Не забудьте скопировать новый образ ядра в {{Path|/boot}} (и не забудьте смонтировать {{Path|/boot}} при необходимости) и обновите конфигурацию загрузчика перед перезагрузкой системы. Если вы не уверены, как выполнить данные два шага, посмотрите команды в разделе '''Локально подключенный принтер (LPT)'''

Теперь переходите к CUPS.

== Установка и конфигурация CUPS ==

=== Установка ===

Installing CUPS with Gentoo is a breeze. CUPS has a few optional features that might be of interest. To enable or disable those features, use the '''USE''' flags associated with them.

{{USEflag|package=net-print/cups
|X+++Позволяет использовать меню вашего DE для загрузки веб-страницы с настройками CUPS в предпочитаемом вами браузере.
|dbus+++Добавляет поддержку системной шины сообщений <code>dbus</code>.
|pam+++Если вам требуется аутентификация заданий печати через подключаемые модули аутентификации, этот флаг активирует поддержку PAM в CUPS.
|ssl+++Если вы хотите использовать удаленную аутентификацию и/или улучшить конфиденциальность, вам необходима поддержка уровня защищенных сокетов (Secure Socket Layer), разрешающая зашифрованные сессии печати. Поддержка SSL должна быть доступна на всех принимающих участие в печати системах вашей сети.
|usb+++Поддежка работы с принтерами, подключаемыми через USB.
}}

Проверьте текущие настройки USE-флагов. Если Вы хотите отклониться от текущих настроек USE-флагов только для CUPS, добавьте подходящие USE-флаги в {{Path|/etc/portage/package.use}}. 

{{RootCmd|emerge -pv cups|output=<pre>
[ebuild N     ] net-print/cups-1.7.3  USE="X acl dbus pam ssl threads usb -debug -gnutls -java -kerberos -lprng-compat -python (-selinux) -static-libs -systemd -xinetd -zeroconf" ABI_X86="(64) (-32) (-x32)" LINGUAS="ca es fr it ja pt_BR ru" PYTHON_SINGLE_TARGET="python2_7" PYTHON_TARGETS="python2_7" 0 kB
</pre>}}

Если результат вас устроит, установим CUPS. 

{{Emerge|cups}}

{{File|/etc/portage/package.use/cups||<pre>
net-print/cups samba
</pre>
}}

{{File|/etc/portage/package.use|Включаем USE флаг cups для samba|
<pre>net-fs/samba cups</pre>
}}

Затем (пере)установим Samba:

{{Emerge|net-fs/samba}}

{{Important/ru|Все пользователи, которым требуется печатать документы, должны быть добавлены в группу <code>lp</code>:

{{RootCmd|gpasswd -a username lp}}

Все пользователи, которым требуется добавлять или редактировать принтеры через веб-интерфейс CUPS, должны быть добавлены в группу <code>lpadmin</code>:

{{RootCmd|gpasswd -a username lpadmin}}
}}

Если принтер подключен к системе локально, и вы хотите, чтобы принтер был доступен сразу же после загрузки, вам нужно загружать демон CUPS автоматически при запуске системы. Убедитесь, что принтер подключен к компьютеру и питанию до запуска демона CUPS. 

Если принтер подсоединен к системе локально, вам нужно загружать CUPS автоматически при запуске системы. Убедитесь, что принтер подключен к компьютеру и сети перед запуском CUPS.

=== Конфигурация ===

Конфигурация сервера CUPS по умолчанию в {{Path|/etc/cups/cupsd.conf}} является для большинства пользователей достаточной. Однако, некоторым пользователям может понадобиться сделать некоторые изменения в конфигурации CUPS.

В следующем разделе мы опишем несколько изменений, которые часто необходимы: 

* Разрешить другим системам использовать принтер, подключенный к этой рабочей станции Linux.
* Предоставить доступ к администрированию CUPS с удаленных систем
* Настроить CUPS, чтобы поддерживать драйверы Windows PCL. Это рекомендуется, если вы хотите чтобы системы на Windows могли использовать общий принтер с SAMBA, так как большинство драйверов Windows - PCL драйверы.
* Настроить систему на использование принтера, подключенного к другой системе (не общему ресурсу Windows).

=== Удаленный доступ к принтеру ===

Если вы хотите чтобы другие системы использовали ваш принтер через IPP, вам нужно явно предоставить доступ к принтеру в {{Path|/etc/cups/cupsd.conf}} . Если вы хотите предоставить общий доступ к принтеру, используя SAMBA, эти изменения не требуются. 

Откройте {{Path|/etc/cups/cupsd.conf}} в вашем любимом редакторе и добавьте строку <code>Allow</code> для систем(ы), которым необходимо получить доступ к принтеру. В следующем примере вы можете предоставить доступ к принтеру с localhost и с любой другой системы, чей IP-адрес начинается с <code>192.168.0</code> . 

{{File|/etc/cups/cupsd.conf|Разрешение удаленного доступа к принтеру|<pre>
<Location />
  Order allow,deny
  Allow localhost
  Allow from 192.168.0.*
</Location>
</pre>}}

Это передает информацию для просмотра всем клиентам сети. Данная информация позволит сетевым пользователям узнать, когда принтер готов к работе:

{{File|/etc/cups/cupsd.conf|Broadcast info|<pre>
BrowseAddress 192.168.0.*:631
</pre>
}}

Также, вам нужно указать на каком порту слушает CUPS, чтобы он отвечал на запросы печати с других машин вашей сети:

{{File|/etc/cups/cupsd.conf|Конфигурация порта|<pre>
Listen *:631
#Listen localhost:631
</pre>
}}

{{Note/ru|Если вы все еще пользуетесь CUPS 1.1 (который в данный момент устарел), то вам будет нужно использовать другой синтаксис для удаленных запросов печати:
{{Code|Устаревшая конфигурация CUPS 1.1|<pre>
Port 631
(Убедитесь, что следующие две строки закомментированы)
#Listen 127.0.0.1:631
#Listen localhost:631
</pre>
}}
}}

=== Удаленное администрирование CUPS ===

Если вы заинтересованы в удаленном администрировании, вам нужно предоставить доступ из других систем, а не только с localhost, для администрирования CUPS. Отредактируйте {{Path|/etc/cups/cupsd.conf}} и явно предоставьте доступ тем системам, которым хотите. Например, чтобы предоставить доступ системе с IP-адресом 192.168.0.3: 

{{File|/etc/cups/cupsd.conf|Разрешение удаленного доступа|<pre>
<Location /admin>
(...)
  Encryption Required
  Order allow,deny
  Allow localhost
  Allow 192.168.0.3
</Location>
</pre>
}}

Не забудьте перезапустить демон CUPS после внесения изменений в {{Path|/etc/cups/cupsd.conf}} запуском <code>/etc/init.d/cupsd restart</code> . 

=== Включение поддержки драйверов Windows PCL ===

Драйвера PCL отправляют данные на сервер печати "в сыром виде". Чтобы включить печать без обработки данных (raw printing) на CUPS, вы должны отредактировать {{Path|/usr/share/cups/mime/mime.types}} и раскомментировать строчку <code>application/octet-stream</code>, если она еще не раскомментирована. Затем вам нужно отредактировать {{Path|/usr/share/cups/mime/mime.convs}} и сделать то же самое, если строчка еще не раскомментирована. 

{{File|/usr/share/cups/mime/mime.types|Включение печати без обработки данных|<pre>
application/octet-stream
</pre>}}

{{File|/usr/share/cups/mime/mime.convs||<pre>
application/octet-stream     application/vnd.cups-raw    0    -
</pre>
}}

Не забудьте перезапустить демон CUPS после внесения этих изменений запуском <code>/etc/init.d/cupsd restart</code> . 

=== Установка удаленного принтера ===

Если принтеры подключены к удаленному серверу с CUPS, вы легко можете настроить вашу систему на использование удаленного принтера изменением файла {{Path|/etc/cups/client.conf}} . 

Предполагая, что принтер подключен к системе, называемой <code>printserver.mydomain</code>, откройте {{Path|/etc/cups/client.conf}} вашим любимым редактором и установите директиву <code>ServerName</code> : 

{{File|/etc/cups/client.conf||<pre>
# (Замените printserver.mydomain на имя вашего сервера печати)
ServerName printserver.mydomain
</pre>
}}

Удаленная система будет иметь настройки принтера по умолчанию, которые вы будете использовать. Если вы хотите изменить принтер по умолчанию, используйте <code>lpoptions</code> :

Сначала перечислите доступные принтеры:

{{RootCmd|lpstat -a|output=<pre>
hpljet5p accepting requests since Jan 01 00:00
hpdjet510 accepting requests since Jan 01 00:00
</pre>}}

Установите HP LaserJet 5P в качестве принтера по умолчанию:

{{RootCmd|lpoptions -d hpljet5p}}

== Конфигурация принтера ==

=== Введение ===

If the printer to be configured is remotely available through a different print server (running CUPS) then the following instructions are not needed. Instead, read [[#Setting_Up_a_Remote_Printer|Setting Up a Remote Printer]]. 

=== Обнаружение принтера ===

Если у Вас USB принтер или принтер с параллельным портом был включен когда вы загрузили систему с Linux, у вас есть возможность получить информацию из ядра, подтверждающую, что принтер был успешно обнаружен. Однако, это просто указание, а не требование. 

{{Cmd|dmesg {{!}} grep -i print|output=<pre>
parport0: Printer, Hewlett-Packard HP LaserJet 2100 Series
</pre>}}

Для USB принтера:

{{Cmd|lsusb|output=<pre>
(...)
Bus 001 Device 007: ID 03f0:1004 Hewlett-Packard DeskJet 970c/970cse
</pre>
}}

=== Установка принтера ===

Чтобы установить принтер на систему, запустите ваш браузер и направьте его на [http://localhost:631 http://localhost:631]. Вы будете встречены веб-интерфейсом CUPS, из которого вы сможете выполнить все задачи администрирования. 


{{Note/ru|Если вы используете HTTPS-соединение для CUPS, в первый раз когда вы обращаетесь к интерфейсу, может пройти довольно длительное время перед тем как появится сайт. Это потому, что первый запрос запускает генерирование сертификатов CUPS SSL, что может быть очень времязатратным заданием.}}

Перейдите к ''Administration'' и введите логин администратора и пароль в поле ввода. Затем, когда вы дошли до интерфейса управления, нажмите на ''Add Printer'' . Вы будете встречены новым экраном, позволяющим ввести следующую информацию: 

*''spooler name'', короткое, но информативное имя, используемое на вашей системе для идентификации принтера. Это имя не должно содержать пробелов или любых других специальных символов. Например, для HP LaserJet 5P вы можете поставить <code>hpljet5p</code> .
*''location'', описание того где принтер расположен физически (например, в вашей комнате, или на кухне прямо рядом с посудомоечной машиной, ...). Это чтобы помочь в поддержке и сопровождении нескольких принтеров.
*''description'', в котором вы должны поместить полное описание принтера. Широко используется полное имя принтера (например, "HP LaserJet 5P").

Следующий экран спрашивает вас устройство, где принтер будет слушать запросы. У вас будет выбор из нескольких устройств. Следующая таблица описывает некоторые возможные устройства, но список не является исчерпывающим.

{| class="wikitable" style="text-align: left;" 
|- 
! Устройство
! Описание
|- 
| AppSocket/HP JetDirect
| Это специальное устройство позволяет доступ к сетевым принтерам через сокет HP JetDirect. Только определенные принтеры это поддерживают.
|- 
| Internet Printing Protocol (IPP или HTTP)
| Используйте это для того, чтобы получить доступ к удаленному принтеру через IPP протокол или прямо (IPP), или через HTTP.
|- 
| LPD/LPR Host или Printer
| Выберите это если принтер является удаленным и подключен к серверу LPD/LPR.
|- 
| Parallel Port #1
| Выберите это если принтер подключен локально к параллельному порту (LPT). Когда принтер обнаружится автоматически, его имя будет также добавлено к устройству.
|- 
| USB Printer #1
| Выберите это в том случае, когда принтер подключен локально к USB порту. Имя принтера должно быть автоматически добавлено к имени устройства.
|-
|}

Если вы устанавливаете удаленный принтер, у вас будет запрошен URI принтера: 

* Сервер принтера LPD требует синтаксис <code>lpd://hostname/queue</code>
* Принтер HP JetDirect требует синтаксис <code>socket://hostname</code>
* Принтер IPP требует синтаксис <code>ipp://hostname/printers/printername</code> или <code>http://hostname:631/printers/printername</code>

Далее, выберите производителя принтера в смежном экране и тип и номер модели в последующем. Для большинства принтеров вы найдете множество драйверов. Вы можете или выбрать один из них сейчас, или поискать в [http://www.openprinting.org/printer_list.cgi Списке принтеров OpenPrinting] хороший драйвер. Вы можете легко изменить драйвера позднее. 

Как только драйвер выбран, CUPS проинформирует вас что принтер успешно добавлен в систему. Теперь вы можете перейти к странице управления принтером на интерфейсе управления и выбрать <code>Configure Printer</code> чтобы изменить настройки принтера (разрешение, формат страницы, ...).

=== Тестирование и повторная конфигурация принтера ===

Чтобы проверить, работает ли принтер правильно, перейдите к странице управления принтером, выберите ваш принтер и нажмите на <code>Print Test Page</code> . 

Если кажется что принтер не работает верно, нажмите на <code>Modify Printer</code>, чтобы его повторно настроить. Вы будете встречены теми же самыми экранами, как и в течение первой установки, но значениями по умолчанию теперь будет ваша текущая конфигурация. 

Если вы не имеете представления почему принтер не работает, вы можете догадаться что происходит, посмотрев в {{Path|/var/log/cups/error_log}} . В следующем примере мы узнаем что у нас имеется ошибка разрешений, возможно вследствие ошибочных настроек <code>Allow</code> в {{Path|/etc/cups/cupsd.conf}} .

{{RootCmd|tail /var/log/cups/error_log|output=<pre>
(...)
E [11/Jun/2005:10:23:28 +0200] [Job 102] Unable to get printer status (client-error-forbidden)!
</pre>
}}

=== Установка наилучшего драйвера ===

Существует множество драйверов принтера; чтобы узнать какой имеет лучшую производительность для вашего принтера, посетите [http://www.openprinting.org/printer_list.cgi список принтеров OpenPrinting] . Выберите вашу марку принтера и тип чтобы узнать какой драйвер рекомендован этим сайтом. Например, для HP LaserJet 5P, сайт рекомендует драйвер <code>ljet4</code> . 

Загрузите PPD файл с сайта и поместите его в {{Path|/usr/share/cups/model}}, затем запустите <code>/etc/init.d/cupsd restart</code> под учетной записью администратора. Это сделает драйвер доступным через веб-интерфейс CUPS. Теперь настройте ваш принтер заново, как описано выше.

== Использование специальных драйверов принтера ==

=== Введение ===

Некоторые принтеры требуют специальные драйвера или предоставляют дополнительные функции, которые не включаются через обычный процесс конфигурации, который описан выше. Эта глава обсудит подборку принтеров и как их заставить работать с Gentoo Linux. 

=== Драйвер Gutenprint ===

Драйверы [http://gutenprint.sourceforge.net gutenprint] — это высококачественные драйверы с открытым исходным кодом для различных принтеров Canon, Epson, HP, Lexmark, Sony, Olympus и PCL, поддерживающие CUPS, ghostscript, The Gimp и другие приложения. 

Дерево Portage в Gentoo содержит ebuild-файл для драйверов gutenprint. Просто используйте <code>emerge gutenprint</code> чтобы их установить. Заметьте, что ebuild-файл слушается достаточно небольшого количества USE-флагов (таких как <code>cups</code> и <code>ppds</code>). Вы должны включить как минимум эти два флага!

{{Emerge|gutenprint}}

Когда процесс сборки завершится, драйвера gutenprint будут доступны через веб-интерфейс CUPS.

=== Драйвер HPLIP ===

См. [[HPLIP|Драйвер HPLIP]].

=== Драйвер PNM2PPA ===

PPA — это технология HP, которая фокусируется на отправке низкоуровневой обработки системе вместо принтера, что делает принтер более дешевым, но более требовательным к ресурсам. 

Если сайт [http://www.openprinting.org/printer_list.cgi OpenPrinting] информирует вас, что драйвер [http://pnm2ppa.sourceforge.net/ pnm2ppa] является лучшим выбором, вам нужно установить фильтр <code>pnm2ppa</code> в систему: 

{{Emerge|pnm2ppa}}

Как только установка завершена, загрузите PPD файл для вашего принтера с сайта [http://www.openprinting.org/printer_list.cgi OpenPrinting] и поместите его в {{Path|/usr/share/cups/model}} . Затем, настройте принтер используя шаги, разъясненные выше.

== Печать с и на Microsoft Windows ==

{{Note/ru|Прочитайте наше [[Samba/HOWTO Руководство по Samba/CUPS]] для более подробной информации по настройке CUPS с Samba.}}

=== Конфигурация Windows клиента для использования IPP ===

Microsoft Windows поддерживает IPP (пользователи Windows 9x и ME должны [http://support.microsoft.com/default.aspx?scid=kb;en-us;294439 установить] это отдельно). Чтобы установить принтер, который подключен к вашей машине с Linux на Windows, запустите мастер добавления принтера <code>Add Printer</code> и выберите <code>Network Printer</code> . Когда у вас запросят URI, используйте синтаксис <code>http://hostname:631/printers/queue</code> . 

=== Конфигурация Windows клиента для принтера с общим доступом с помощью Samba ===

Чтобы открыть общий доступ к принтеру в сети CIFS, у вас должен быть установлен и правильно сконфигурирован SAMBA. Как это сделать выходит за рамки данного документа, но мы быстро разберемся с конфигурацией SAMBA для принтеров с общим доступом. 

Откройте {{Path|/etc/samba/smb.conf}} в вашем любимом редакторе и добавьте в него раздел <code>[printers]</code> : 

{{Code|Добавление раздела [printers]|<pre>
[printers]
  comment      = All printers
  path         = /var/spool/samba
  browseable   = no
  guest ok     = no
  writable     = no
  printable    = yes
  public       = yes
  printer name = hpljet5p
</pre>
}}

Теперь направляйтесь вверх файла {{Path|smb.conf}} до тех пор, пока вы не будете на разделе <code>[global]</code> . Далее определите где находятся настройки <code>printcap name</code> и <code>printing</code> и установите каждую из них в <code>cups</code> :

{{Code|Изменение раздела [global]|<pre>
[global]
  (...)
  printcap name = cups
  printing      = cups
</pre>
}}

Убедитесь, что вы включили поддержку [[#Включение_поддержки_драйверов_Windows_PCL|windows pcl]] в CUPS. Затем перезапустите службу <code>smb</code> , чтобы изменения вступили в силу.

=== Конфигурация Linux клиента для сервера печати Windows ===

Прежде всего, убедитесь, что в системе Windows открыт общий доступ к принтеру.

Затем, в веб-интерфейсе CUPS настройте принтер как описано ранее. Вы заметите, что CUPS добавил другой драйвер под названием <code>Windows Printer via SAMBA</code> . Выберите его и используйте для URI синтаксис <code>smb://username:password@workgroup/server/printername</code> или <code>smb://server/printername</code> .

{{Cmd|smbclient -N '\\server\'}}

Затем настройте принтер в веб-интерфейсе как описано ранее. Вы заметите, что CUPS добавил другой драйвер под названием <code>Windows Printer via SAMBA</code> . Выберите его и используйте URI вида <code>smb://username:password@workgroup/server/printername</code> или <code>smb://server/printername</code> .

{{Important/ru|Все специальные символы в URI выше должны быть должным образом кодированы. Например,
<code>smb://BEN-DESKTOP/HP Color LaserJet CP1510 series PCL6</code>
  
кодируется как
  
<code>smb://BEN-DESKTOP/HP%20Color%20LaserJet%20CP1510%20series%20PCL6</code>
  
  
Такую строку можно получить с помощью следующей команды:
{{Cmd|python2 -c 'import urllib; print "smb://" + urllib.quote("BEN-DESKTOP/HP Color LaserJet CP1510 series PCL6")'}}
}}

== Приложения, связанные с печатью ==

=== Введение ===

Существует много инструментов, которые помогут настроить принтер, использовать дополнительные фильтры печати, добавить функции к возможностям вашего принтера, и т. д. Эта глава перечисляет некоторые из них. Список не является исчерпывающим и не предназначен для обсуждения каждого инструмента в мельчайших подробностях. 

=== Gtk-LP — инструмент настройки принтера, основанный на Gtk ===

С [http://gtklp.sourceforge.net/index.shtml Gtk-LP] вы можете установить, изменить и настроить принтер из автономного приложения Gtk. Оно использует CUPS и также предоставляет все стандартные возможности CUPS. Это определенно стоит проверить, если вам не нравится веб-интерфейс CUPS или хочется автономное приложение для повседневных задач печати. 

Чтобы его установить, скомпилируйте <code>gtklp</code> : 

{{Emerge|gtklp}}

== Устранение проблем ==

=== Error: Unable to convert file 0 to printable format ===

Если у вас проблемы с печатью и {{Path|/var/log/cups/error_log}} показывает это сообщение: 

{{Code|Лог-файл сообщений об ошибках|<pre>
Unable to convert file 0 to printable format
</pre>
}}

Вам необходимо заново установить <code>ghostscript-gpl</code> с USE-флагом <code>cups</code>. Вы также можете добавить <code>cups</code> к USE-флагам в {{Path|/etc/portage/make.conf}} , или можете включить его только для <code>ghostscript-gpl</code> , как показано ниже: 

{{RootCmd|echo "app-text/ghostscript-gpl cups" >> /etc/portage/package.use}}

Затем установите <code>ghostscript-gpl</code>. После того как компиляция завершена, перезапустите <code>cupsd</code> : 

{{RootCmd|/etc/init.d/cupsd restart}}


{{Migrated|originalauthors=swift, nightmorph}}
