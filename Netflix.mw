Recently it has been made possible to run it via [[Wine]].

Superior alternative approach using '''Pipelight''' at [[Netflix/Pipelight]].

Check [http://www.compholio.com/wine-compholio/ the “Compholio” Wine patches page] for the latest information. At the time of this writing, Wine version 1.5.27 seemed to be targeted.

==Preconfiguring==

===xattr===
File system extended attributes are used to keep the precious DRM working, so you’ll need support in your kernel as well as your file system mounted explicitly with the option.

====Checking for support====
Quick check:
{{cmd|grep user_xattr /etc/mtab}}

More thorough:
{{cmd|<nowiki>xattr_test=$(mktemp); setfattr -n 'user.testAttr' -v 'attribute value' $xattr_test &> /dev/null; getfattr $xattr_test 2>&1 | grep -q user.testAttr && echo 'It works!' || echo 'No workie!'; rm $xattr_test</nowiki>}}

====Adding support====

{{kernel||<pre style="font-size: inherit;">File systems  --->
    Ext3 journalling file system support
[*]     Ext3 extended attributes
    The Extended 4 (ext4) filesystem
[*]     Ext4 extended attributes</pre>}}

See [[Kernel/Upgrade]] for in-depth kernel rebuild instructions.

{{file|/etc/fstab||<pre style="font-size: inherit;"># <fs>			<mountpoint>	<type>		<opts>		<dump/pass>
/dev/sda3		/		ext4		user_xattr	0 1</pre>}}

If you were only missing the option in <code>/etc/fstab</code>:
{{rootCmd|mount / -o remount}}

===Wine===
Wine is quite the moving target, so will almost certainly need to be unmasked:
{{rootCmd|echo -e '~app-emulation/wine-1.5.27\t#for Netflix' >> /etc/portage/package.accept_keywords}}

Alternatively, with directory scheme:
{{rootCmd|mkdir /etc/portage/package.accept_keywords}}
{{rootCmd|echo '~app-emulation/wine-1.5.27' >> /etc/portage/package.accept_keywords/netflix}}

===winetricks===
We’ll also need the winetricks script to install some fonts:
{{rootCmd|echo -e '~app-emulation/winetricks-947\t#for Netflix' >> /etc/portage/package.accept_keywords}}

Alternatively, with directory scheme:
{{rootCmd|echo '~app-emulation/winetricks-947' >> /etc/portage/package.accept_keywords/netflix}}

If you aren’t using GNOME, you can save yourself some trouble by ensuring the '<code>gtk</code>' USE flag is disabled:
{{rootCmd|echo -e 'app-emulation/winetricks -gtk\t#avoid GNOME' >> /etc/portage/package.use}}

Alternatively, with directory scheme:
{{rootCmd|mkdir /etc/portage/package.use}}
{{rootCmd|echo 'app-emulation/winetricks -gtk' >> /etc/portage/package.use/avoidgnome-netflix}}

==Including patches==
{{rootCmd|mkdir -p /etc/portage/patches/app-emulation/wine-1.5.27}}
{{rootCmd|<nowiki>wget -P /etc/portage/patches/app-emulation/wine-1.5.27 --content-disposition `wget http://compholio.com/wine-compholio/ -O - | egrep -io '\/wine.*?\.patch' | perl -pe 's@^@http://compholio.com@g'`</nowiki>}}<!-- how to match download\.php\?.*?\.patch but not \.deb|\.rpm? --><!--
{{rootCmd|<nowiki>wget -P /etc/portage/patches/app-emulation/wine-1.5.27/ -r -nd --content-disposition -A '*download.php' -A '*.patch' http://compholio.com/wine-compholio/</nowiki>}}
-->

==emerge==
{{rootCmd|emerge -atv wine winetricks attr}}

==Wine installation==
This takes a bit, and produces a lot of output:
{{cmd|<pre style="font-size: inherit;">if [ ! -d ~/.netflix-wine ]; then
	export WINEARCH=win32 WINEPREFIX=~/.netflix-wine

	wget -O /tmp/Firefox-18.0.2.exe 'http://download.mozilla.org/?product=firefox-18.0.2&os=win&lang=en-US'
	wget -O /tmp/Silverlight-4.exe \
	-U 'Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; Trident/6.0)' \
	'http://www.microsoft.com/getsilverlight/handlers/getsilverlight.ashx?v=4.0'

	wine /tmp/Firefox-18.0.2.exe /S
	wine /tmp/Silverlight-4.exe /q

	winetricks corefonts

	export -n WINEARCH WINEPREFIX
fi</pre>}}

==Extra configuration==
You’ll need a couple more packages for this:
{{rootCmd|emerge -antv dos2unix deb2targz}}

{{cmd|<pre style="font-size: inherit;">wget -P /tmp/ $(\
	wget -O - https://launchpad.net/~ehoover/+archive/compholio/+build/$(\
		wget -O - \
		'https://launchpad.net/~ehoover/+archive/compholio/+builds?build_text=netflix-desktop&build_state=built' \
		| egrep -i 'href="\/~ehoover' \
		| head -1 \
		| egrep -o 'build\/[0-9]+' \
		| sed 's/build\///'\
	) \
	| egrep -io '"http.*?\.deb"' | sed 's/"\(.*\)"/\1/'\
) # in case you're wondering, it doesn't matter what arch this is for

tar -C /tmp/ -x ./usr/share/wine-browser-installer/ -f $(\
	deb2targz /tmp/wine-browser-installer*.deb \
	| grep wrote \
	| sed "s/.*'\(.*\)'.*/\1/"\
) --strip-components=3

PROFDIR=$(mktemp -u | sed 's/^.*\.\(.*\)/\L\1\.default/' | cut -c3-18)
PROFPATH=~/".netflix-wine/drive_c/users/$(whoami)/Application Data/Mozilla/Firefox"
mkdir -p "$PROFPATH"/Profiles/"$PROFDIR"
chmod 0700 "$PROFPATH"/Profiles/"$PROFDIR"
echo \
'[General]
StartWithLastProfile=1

[Profile0]
Name=default
IsRelative=1
Path=Profiles/'"$PROFDIR"'
' >> "$PROFPATH"/profiles.ini
dos2unix "$PROFPATH"/profiles.ini
cp /tmp/wine-browser-installer/browser-profile/prefs.js "$PROFPATH"/Profiles/"$PROFDIR"/
chmod 0600 "$PROFPATH"/Profiles/"$PROFDIR"/prefs.js
</pre>}}

==Starting it==
{{cmd|<pre style="font-size: inherit;">WINEARCH=win32 \
WINEPREFIX=~/.netflix-wine \
wine ~/.netflix-wine/drive_c/Program\ Files/Mozilla\ Firefox/firefox.exe 'http://netflix.com/'</pre>}}

==Troubleshooting==
{{rootCmd|eselect opengl list}}
{{rootCmd|eselect opengl set #}}

==See also==
*[http://forums-lb.gentoo.org/viewtopic-t-951092.html Gentoo Forums :: View topic - HOWTO: Install Netflix on Gentoo]

[[Category:Software]]
