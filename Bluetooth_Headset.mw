This article describes the setup of a '''bluetooth''' headset.

== Prerequisites ==
A [[Bluetooth|Bluetooth installation]] must be done first. If you use ''simple-agent'', no GUI programs or applets are needed. Here is how to [[ALSA|setup ALSA]] sound.

== ALSA configuration ==
Edit /etc/asound.conf (systemwide) or ~/.asoundrc (user level). Add '''one''' of the following code snippets, and replace the MAC address with the one of your bluetooth device.

{{File|/etc/asound.conf or ~/.asoundrc||
# First try autodetection:
@hooks [
	{
		func load
		files [
			"/usr/share/alsa/bluetooth.conf"
		]
		errors false
	}
]

# Specify your device if autodetection doesn't work for you:

## To redirect ALL output to the headset
#pcm.!default {
#type bluetooth
#device 00:16:44:FD:6B:A0
#profile "auto"
#}

## OR: to create a new, additional output channel
#pcm.bluetooth {
#type bluetooth
#device 00:16:44:FD:6B:A0
#profile "auto"
#}
}}

Restart ALSA.
{{RootCmd|/etc/init.d/alsasound restart}}

== Testing ==
Play a sound file. When it works, please add your device to our [[#List_of_working_devices|Hall of Fame]].
{{Cmd|mplayer -ao alsa:device{{=}}bluetooth <filename>}}

== Troubleshooting ==

=== Audio socket ===
Some setups (non-PulseAudio) need ''Socket'' enabled, if there's no sound.
{{File|/etc/bluetooth/audio.conf|Enable audio socket|<pre>
[General]
Enable=Socket
</pre>}}

=== Can't open input device ===
Compile and load the ''uinput'' kernel module, when things don't work, and the logs show this error:
{{Code|Output of Syslog|<pre>
bluetoothd: Can't open input device: No such file or directory (2)
bluetoothd: AVRCP: failed to init uinput for 00:16:44:FD:6B:A0
bluetoothd: Unable to select SEP
</pre>}}

{{Kernel||<pre>
Device Drivers  --->
   Input device support  --->
      [*]   Miscellaneous devices  --->
         <M>   User level driver support
</pre>}}

=== No audio service is available ===
After updating to {{Package|net-wireless/bluez}}-4.97 it might happen, that a Bluetooth headset is connected, but [[ALSA]] / [[PulseAudio]] fails to pick up the connected device.

An error message like this might be shown in the output of PulseAudio:
{{Code|Debug output of PulseAudio|<pre>
I: [pulseaudio] module-card-restore.c: Restoring profile for card bluez_card.00_16_94_0B_6F_DE.
I: [pulseaudio] card.c: Created 10 "bluez_card.00_16_94_0B_6F_DE"
bt_audio_service_open: connect() failed: Connection refused (111)
W: [pulseaudio] module-bluetooth-device.c: Bluetooth audio service not available
W: [pulseaudio] module-bluetooth-device.c: Service not connected
I: [pulseaudio] card.c: Freed 10 "bluez_card.00_16_94_0B_6F_DE"
E: [pulseaudio] module.c: Failed to load module "module-bluetooth-device" (argument: "address="00:16:94:0B:6F:DE" path="/org/bluez/31716/hci0/dev_00_16_94_0B_6F_DE""): initialization failed.
</pre>}}

To fix this, the following needs to be done:
# Enable the audio socket of bluetoothd
{{File|/etc/bluetooth/audio.conf|Enable audio socket|<pre>
[General]
Enable=Socket
</pre>}}
# Restart ''bluetoothd'' by doing one of the following things:
#* Turn the software wireless kill switch off and on again
{{RootCmd|rfkill block bluetooth
|rfkill unblock bluetooth}}
#* Turn the hardware wireless kill switch off and on again
#* Reboot the computer
# Reconnect the Bluetooth headset

== List of working devices ==
* Dell BH200 - works as headphones - microphone not yet tested 
* HFBLU-ST6 - works as headphones - microphone doesn't seem to work with preliminary testing 
* Nokia BH-214 - works as headphones - microphone doesn't seem to work with preliminary testing 
* HBH-DS200 - works as headphones - microphone not yet tested
* Plantronics BackBeat GO - works as headphones - microphone not yet tested 

[[Category:Sound devices]]
