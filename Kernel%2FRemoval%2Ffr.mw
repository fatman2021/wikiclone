<languages />
Cet article explique comment supprimer les anciens [[kernel/fr|noyau]]x.

== Suppression des sources du noyau ==

Après avoir installé un nouveau noyau, et s'il fonctionne correctement, l'ancien noyau peut être supprimé. Pour supprimer les anciennes sources du noyau, l'option « --depclean » de la commande emerge (« -c » en forme raccourcie) peut être utilisée pour retirer toutes les versions anciennes et non-utilisées d'un paquet installé en slot, comme par exemple,  {{Package|sys-kernel/gentoo-sources}}.

{{Emerge|params+=--depclean|gentoo-sources}}

Assurez-vous bien que les sources du noyau courant ne vont pas être retirées. (Reportez-vous à  l'article sur la [[Kernel/Upgrade/fr|mise à jour du noyau]] pour savoir comment opérer la mise à jour.)

=== Protéger les sources du noyau ===

Si de nouvelles sources du noyau ont été installées et que vous exécutez « --depclean » avant de commuter sur les nouvelles sources, les sources du noyau en cours d'exécution seront retirées. Mais si vous désirez continuer avec les sources courantes, cette suppression n'est pas souhaitée, parce que vous pouvez en avoir besoin pour, par exemple, mettre des modules externes du noyau à jour. C'est par conséquent une bonne pratique que d'ajouter la version spécifique du noyau à votre fichier world pour le protéger des opérations de « --depclean ».

{{Emerge|params+=--noreplace|gentoo-sources:3.3.8}}

Notez bien la notation en « slot », qui a recours aux deux-points au lieu du tiret. Chaque version du noyau est son propre « slot ».

== Remove kernel leftovers ==

=== Using eclean-kernel ===

{{Package|app-portage/eclean-kernel}} is a simple tool for old kernel cleanup/removal. It removes both built kernel files and build directories if they're no longer reference by any preserved kernel.

For example, to keep three newest kernels around:

{{RootCmd|eclean-kernel -n 3}}

=== Manual removal ===

Portage however only removes the files it installed - the files generated during the kernel build and installation remain. They can be safely removed.

* When a kernel is built in the source directory, files generated during the build process remain, and are not removed by Portage:

: {{RootCmd|rm -r /usr/src/linux-3.X.Y}}

* During kernel setup, the kernel modules are copied to a sub directory of <tt>/lib/modules/</tt>:

: {{RootCmd|rm -r /lib/modules/3.X.Y}}

* The old files in {{Path|/boot}} can also be removed:

: {{RootCmd|rm /boot/kernel-3.X.Y|rm /boot/System.map-3.X.Y|rm /boot/config-3.X.Y}}

* Lastly, remove all leftover entries from your bootloader's config file.

[[Category:Kernel]]
