This article describes the setup of a Wifi network device.

== Installation ==

=== Hardware detection ===
To choose the right driver, first detect the used Wifi controllers. You can use [[Hardware detection#lspci|lspci]] or [[Hardware detection#lsusb|lsusb]] for this task:
{{RootCmd|lspci {{!}} grep -i network}}
{{Cmd|lsusb {{!}} grep -i network}}

=== Kernel ===
You need to activate the following kernel options:
{{Kernel||<pre>
[*] Networking support  --->
    [*] Wireless  --->
        <*> cfg80211 - wireless configuration API
        <*> Generic IEEE 802.11 Networking Stack (mac80211)

        Optionally enable a Wifi LED:
        [*] Enable LED triggers

Device Drivers  --->
    [*] Network device support  --->
        [*] Wireless LAN  --->

            Select the driver for your Wifi network device, e.g.:
            <*> Broadcom 43xx wireless support (mac80211 stack) (b43)
            [*]    Support for 802.11n (N-PHY) devices
            [*]    Support for low-power (LP-PHY) devices
            [*]    Support for HT-PHY (high throughput) devices
            <*> Intel Wireless WiFi Next Gen AGN - Wireless-N/Advanced-N/Ultimate-N (iwlwifi)
            <*> Intel Wireless WiFi 4965AGN (iwl4965)
            <*> Intel PRO/Wireless 3945ABG/BG Network Connection (iwl3945)
            <*> Ralink driver support  --->
                <*>   Ralink rt27xx/rt28xx/rt30xx (USB) support (rt2800usb)
</pre>}}

To enable wireless extensions, compile your kernel with the following option (this will support old wireless-tools & iwconfig):
{{Kernel||<pre>
[*] Networking support  --->
    [*] Wireless  --->
        [*]     cfg80211 wireless extensions compatibility
</pre>
}}

=== Firmware ===
Besides the kernel driver, you will also need firmware:
{| class="wikitable"
|-
! Wifi device
! driver
! Firmware
! Note
|-
| Broadcom 43xx wireless support
| b43 / b43legacy
| {{Package|sys-firmware/b43-firmware}}
| aircrack-ng ready, most probably the best choice [http://wireless.kernel.org/en/users/Drivers/b43#Supported_devices if your bcm43xx device is supported]
|-
| Broadcom 43xx wireless support (e.g. 4313)
| brcmsmac / brcmfmac
| {{Package|sys-kernel/linux-firmware}}
| no powersave, LED support and [http://wireless.kernel.org/en/users/Drivers/brcm80211#To_be_done_for_softmac_driver other features]
|-
| Broadcom 43xx wireless support
| wl
| {{Package|net-wireless/broadcom-sta}}
| proprietary, no AP or Monitor modes, [http://wireless.kernel.org/en/users/Drivers/b43#Comparison_of_recent_drivers comparision of bcm43xx drivers]
|-
| Atheros AR9271 & AR7010 
| ath9k_htc
| {{Package|sys-kernel/linux-firmware}}
|
|-
| Intel PRO/Wireless 3945ABG/BG
| iwl3945
| {{Package|sys-kernel/linux-firmware}}
|
|-
| Intel Wireless WiFi 4965AGN
| iwl4965
| {{Package|sys-kernel/linux-firmware}}
|
|-
| Intel Wireless WiFi 5100AGN, 5300AGN, 5350AGN
| iwlwifi
| {{Package|sys-firmware/iwl5000-ucode}} or {{Package|sys-kernel/linux-firmware}}
|
|-
| Intel Wireless WiFi 5150AGN
| iwlwifi
| {{Package|sys-firmware/iwl5150-ucode}} or {{Package|sys-kernel/linux-firmware}}
|
|-
| Intel Centrino Wireless-N 1000
| iwlwifi
| {{Package|sys-firmware/iwl1000-ucode}} or {{Package|sys-kernel/linux-firmware}}
|
|-
| Intel Centrino Ultimate-N 6300, Advanced-N 6200
| iwlwifi
| {{Package|sys-firmware/iwl6000-ucode}} or {{Package|sys-kernel/linux-firmware}}
|
|-
| Intel Centrino Advanced-N + WiMAX 6250, Wireless-N + WiMAX 6150 
| iwlwifi
| {{Package|sys-firmware/iwl6050-ucode}} or {{Package|sys-kernel/linux-firmware}}
|
|-
| Intel Centrino Advanced-N 6205
| iwlwifi
| {{Package|sys-firmware/iwl6005-ucode}} or {{Package|sys-kernel/linux-firmware}}
|
|-
| Intel Centrino Advanced-N 6230, Wireless-N 1030, Wireless-N 130
| iwlwifi
| {{Package|sys-firmware/iwl6030-ucode}} or {{Package|sys-kernel/linux-firmware}}
|
|-
| Intel Centrino Wireless-N 2200
| iwlwifi
| {{Package|sys-firmware/iwl2000-ucode}} or {{Package|sys-kernel/linux-firmware}}
|
|-
| Intel Centrino Wireless-N 2230
| iwlwifi
| {{Package|sys-firmware/iwl2030-ucode}} or {{Package|sys-kernel/linux-firmware}}
|
|-
| Intel Centrino Wireless-N 100, 105, 135
| iwlwifi
| {{Package|sys-kernel/linux-firmware}}
|
|-
| Ralink driver support
| e.g. rt2800usb
| {{Package|sys-kernel/linux-firmware}}
|
|}


==== b43 ====
Install the required package, e.g for {{Package|sys-firmware/b43-firmware}}:
{{RootCmd|echo "sys-firmware/b43-firmware" >> /etc/portage/package.accept_keywords}}
{{RootCmd|echo "sys-firmware/b43-firmware Broadcom" >> /etc/portage/package.license}}
{{emerge|b43-firmware}}

====linux-firmware====
Install the required package, e.g for {{Package|sys-kernel/linux-firmware}}:
{{Emerge|linux-firmware}}

If there is no package, you have to download the firmware and move it to {{Path|/lib/firmware}} yourself.

== Testing ==
After a reboot with the new kernel or after loading the modules, check that the device is ready:
{{Cmd|ifconfig -a|output=<pre>
wlan0     ...
</pre>}}
{{Note|The name of the device may be different, e.g. eth1 or ath0 or a name as described in [http://www.freedesktop.org/wiki/Software/systemd/PredictableNetworkInterfaceNames Predictable Network Interface Names] if you use <nowiki>>=</nowiki>{{Package|sys-fs/udev-200}} with default configuration }}
You may also try to detect the device (and its name) with either {{Package|net-wireless/wireless-tools}} (if your driver supports the wireless extensions stack)
{{RootCmd|iwconfig|output=<pre>
wlan0     ...
</pre>}}
or with {{Package|net-wireless/iw}} (if your driver supports the nl80211 stack)
{{RootCmd|iw dev|output=<pre>
   phy#0
	Interface wlan0
		ifindex 4
		type managed
</pre>}}
If not, check dmesg for errors:
{{Cmd|dmesg}}

== Configuration ==
* [[Network management]]

== Advanced Configuration ==
* [[Power management/Wifi|Power management]]

== Official Upstream Documentation ==

* [[http://wireless.kernel.org/|kernel.org wifi]]

[[Category:Network devices]]
