<languages />
В этой статье описывается удаление старых [[kernel/ru|ядер]].

== Удаление исходных текстов ядра ==

После установки нового ядра, и если оно работает удовлетворительно, старое ядро ​​можно удалить. Чтобы удалить старые исходники ядра можно использовать опцию ''--depclean'' (укороченная форма - ''-c'') команды emerge. Эта команда удаляет все старые или неиспользованные версии пакета, например {{Package|sys-kernel/gentoo-sources}}.

{{Emerge|params+=--depclean|gentoo-sources}}

Пожалуйста убедитесь что вы не удаляете исходники ядра на котором работаете. Посмотрите статью по [[Kernel/Upgrade|обновлению ядра]] для информации о том, как его обновлять.

=== Защита исходных кодов ядра ===

Если вы установили новую версию ядра, и запустили ''--depclean'' до того, как переключились на новые исходные коды, текущие исходные коды будут удалены. Однако, если вы хотите сохранить текущие исходные коды, это удаление нежелательно, так как вам могут понадобиться исходные коды, например, для компиляции внешних модулей ядра. Поэтому хорошей практикой считается добавление конкретной версии ядра в ваш world-файл для защиты его от операций ''--depclean''.

{{Emerge|params+=--noreplace|gentoo-sources:3.3.8}}

Заметьте слотовую нотацию, использование двоеточия вместо тире. Каждая версия ядра занимает свой собственный слот.

== Удаление остатков ядра ==

=== Используем eclean-kernel ===

{{Package|app-portage/eclean-kernel}} это простая программа для очистки/удаления старого ядра. Она удаляет скомпилированные файлы и каталоги ядра, если на них не ссылается никакое сохраненное ядро.

For example, to keep three newest kernels around:

{{RootCmd|eclean-kernel -n 3}}

=== Manual removal ===

Portage,  удаляет только те файлы, которые он установил - файлы, созданные во время сборки ядра и установки остаются. Они могут быть безопасно удалены.

* When a kernel is built in the source directory, files generated during the build process remain, and are not removed by Portage:

: {{RootCmd|rm -r /usr/src/linux-3.X.Y}}

* During kernel setup, the kernel modules are copied to a sub directory of <tt>/lib/modules/</tt>:

: {{RootCmd|rm -r /lib/modules/3.X.Y}}

* The old files in {{Path|/boot}} can also be removed:

: {{RootCmd|rm /boot/kernel-3.X.Y|rm /boot/System.map-3.X.Y|rm /boot/config-3.X.Y}}

* И наконец, удалите все оставшиеся записи из файла конфигурации вашего загрузчика.

[[Category:Kernel]]
