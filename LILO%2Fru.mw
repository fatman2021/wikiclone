<languages />


{{Metadata|abstract=LILO — это простой загрузчик для Linux и других операционных систем.}}

{{InfoBox stack
|{{InfoBox homepage|http://lilo.alioth.debian.org/|header=true}}
|{{InfoBox wikipedia|LILO_(boot_loader)}}
}}

'''LILO (Linux Loader)''' — это простой загрузчик для Linux и других операционных систем.

== Установка ==

Установка LILO состоит из двух стадий. Первая стадия — установка самой программы в систему (но не активация LILO), вторая — установка загрузчика в MBR (активация).

=== USE-флаги ===

{{USEflag
|package=sys-boot/lilo
|static
|minimal
|pxeserial
|device-mapper
}}

=== Установка ===

Установка программы разместит её в файловой системе, но не установит в MBR.

{{emerge|lilo}}

=== Установка LILO в MBR ===

Установить (или обновить) LILO в MBR можно командой <code>lilo</code>. Однако перед этим необходимо отредактировать настройки в файле {{Path|/etc/lilo.conf}}, см. следующий раздел.

{{RootCmd|lilo}}

== Настройка LILO ==

Пример файла {{Path|lilo.conf}} находится в {{Path|/etc/lilo.conf.example}}. Чтобы начать настройку LILO, скопируйте файл с примером. 

{{RootCmd|cp /etc/lilo.conf.example /etc/lilo.conf}}

Откорректируем файл {{Path|/etc/lilo.conf}}.

=== Основные настройки LILO ===

Настроим LILO для размещения в системе. Параметр <code>boot</code> указывает, куда должен быть установлен загрузчик. Обычно это блочное устройство, соответствующее первому диску (диску, с которого загружается система), например {{Path|/dev/sda}}. Имейте в виду, что в файле {{Path|lilo.conf.example}} все еще используются имена {{Path|/dev/hda}}, так что не забудьте заменить {{Path|/dev/hda}} на {{Path|/dev/sda}}.

{{File|/etc/lilo.conf|Определение места установки LILO|<pre>
boot = /dev/sda
map = /boot/.map
</pre>}}

Далее, сообщим LILO, что нужно загружать по умолчанию (если пользователь не выбрал какой-либо элемент загрузочного меню). Используемое здесь имя является значением <code>label</code> из блоков настроек операционных систем, определяемых далее в этом файле.

{{File|/etc/lilo.conf|Загрузка по умолчанию блока Gentoo|<pre>
default = Gentoo
</pre>}}

LILO некоторое время показывает доступные варианты загрузки, а затем загружает выбранную по умолчанию ОС. Время ожидания определяется параметром <code>timeout</code> и измеряется десятыми долями секунды (так, значение 10 — одна секунда):

{{File|/etc/lilo.conf|Установка пятисекундного интервала перед загрузкой умолчальной ОС|<pre>
timeout = 50
</pre>}}

=== Настройка блока для Gentoo ===

Ниже приведен пример блока для Gentoo. Метка (label) “Gentoo” соответствует определённому ранее параметру <code>default</code>.

{{File|/etc/lilo.conf|Пример конфигурации для Gentoo Linux|<pre>
image = /boot/kernel-3.11.2-gentoo
  label = Gentoo
  read-only
  root = /dev/sda4
</pre>}}

Будет загружено ядро Linux {{Path|/boot/kernel-3.11.2-gentoo}} с корневой файловой системой {{Path|/dev/sda4}}.

=== Добавление параметров ядра ===

Для добавления параметров ядра к блоку ОС, используйте параметр <code>append</code>. Например, чтобы загрузить ядро Linux в «тихом» режиме (выводятся только критически важные сообщения ядра):

{{File|/etc/lilo.conf|Использование append для передачи ядру параметра quiet|<pre>
image = /boot/kernel-3.11.2-gentoo
	label = Gentoo
	read-only
	root = /dev/sda4
	append = "quiet"
</pre>}}

Пользователи [[Systemd|systemd]], к примеру, могут пожелать установить <code>init=/usr/lib/systemd/systemd</code>, чтобы использовать файл init из systemd:

{{File|/etc/lilo.conf|Использование systemd с LILO|<pre>
	append = "quiet init=/usr/lib/systemd/systemd"
</pre>}}

Как легко заметить, дополнительные настройки ядра просто добавляются к одному и тому же параметру <code>append</code>.

=== Определение нескольких блоков ===

Хорошей идеей будет хранить старые определения на случай, если новое ядро не загружается. Это можно сделать, создав другой блок настроек:

{{File|/etc/lilo.conf|Определение второго блока ОС|<pre>
image = /boot/kernel-3.9.2-gentoo
        root = /dev/sda4
        label = OldGentoo
        read-only
</pre>}}

== Обновление LILO в MBR ==

Как упоминалось ранее, для того чтобы установить LILO в MBR, необходимо выполнить команду <code>lilo</code>. Этот шаг необходимо повторять каждый раз, когда изменяется файл {{Path|/etc/lilo.conf}}, или когда обновляется ядро (или ядра) Linux, указанные в {{Path|/etc/lilo.conf}}.

{{RootCmd|lilo}}

Многократный запуск команды <code>lilo</code> не нанесет вреда.


[[Category:Bootloaders]]


==== Dual Boot gentoo and FreeBSD ====

To dual boot Gentoo and FreeBSD, edit {{Path|/etc/lilo.conf}} as follows:

<!--T:43-->
{{File|/etc/lilo.conf|Dual boot: Gentoo and FreeBSD|<pre>
large-memory
lba32
boot=/dev/sda
install=menu
map=/boot/map
prompt
 
default=Linux
image=/boot/vmlinuz-2.6.26
label="Linux"
root=/dev/sda1
append=""
read-only
optional
 
other=/dev/sda3
label="FreeBSD"
</pre>}}

Make sure to adapt the example configuration file to match the setup used.
